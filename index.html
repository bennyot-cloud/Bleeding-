<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AVT Value Calculator</title>
    <style>
        :root {
            --primary: #0f172a;
            --accent: #3b82f6;
            --danger: #ef4444;
            --success: #10b981;
            --bg: #f1f5f9;
            --card-bg: #ffffff;
            --text-main: #334155;
            --text-light: #64748b;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 1200px;
            width: 100%;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 40px -5px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        /* Inputs Panel */
        .inputs-panel {
            padding: 30px;
            border-right: 1px solid #e2e8f0;
            background: #fff;
            overflow-y: auto;
        }

        h2 { margin: 0 0 10px 0; color: var(--primary); font-size: 22px; }
        .subtitle { color: var(--text-light); font-size: 14px; margin-bottom: 25px; display: block;}

        .section-title {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 700;
            color: var(--accent);
            margin: 25px 0 15px 0;
            border-bottom: 1px solid #f1f5f9;
            padding-bottom: 5px;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--text-main);
        }

        .input-wrapper {
            position: relative;
        }
        .input-wrapper span {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 14px;
        }

        input {
            width: 100%;
            padding: 10px 10px 10px 25px;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            color: var(--primary);
            box-sizing: border-box;
            transition: 0.2s;
        }
        input:focus { outline: none; border-color: var(--accent); background: #f8fafc; }

        /* Visuals Panel */
        .visuals-panel {
            padding: 30px;
            background: #f8fafc;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Top Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .kpi-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .kpi-label { font-size: 11px; color: var(--text-light); font-weight: 600; text-transform: uppercase; }
        .kpi-value { font-size: 24px; font-weight: 800; margin-top: 5px; }
        .kpi-value.red { color: var(--danger); }
        .kpi-value.blue { color: var(--accent); }

        /* Main Bar Chart */
        .chart-box {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .bar-group { margin-bottom: 20px; }
        .bar-label { display: flex; justify-content: space-between; font-size: 13px; font-weight: 600; margin-bottom: 8px; }
        .bar-track { height: 10px; background: #e2e8f0; border-radius: 5px; overflow: hidden; }
        .bar-fill { height: 100%; width: 0%; transition: width 1s; border-radius: 5px; }
        .bg-red { background: var(--danger); }
        .bg-blue { background: var(--accent); }

        /* The Killer ROI Section */
        .roi-section {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e2e8f0;
            margin-top: auto;
        }
        
        .roi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .roi-title { font-size: 14px; font-weight: 700; color: var(--success); }

        .roi-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .roi-metric div:first-child { font-size: 12px; color: var(--text-light); margin-bottom: 4px; }
        .roi-metric div:last-child { font-size: 20px; font-weight: 800; color: var(--text-main); }

        @media (max-width: 900px) { .dashboard { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="dashboard">
    <div class="inputs-panel">
        <h2>ROI & Cost of Inaction</h2>
        <span class="subtitle">Validate the business case for upgrading.</span>

        <div class="section-title">1. Operational Pain (Annual)</div>
        <div class="input-row">
            <div class="input-group">
                <label>Service Calls / Year</label>
                <div class="input-wrapper"><span>#</span><input type="number" id="calls" value="12" oninput="calc()"></div>
            </div>
            <div class="input-group">
                <label>Avg Cost per Call</label>
                <div class="input-wrapper"><span>$</span><input type="number" id="callCost" value="800" oninput="calc()"></div>
            </div>
        </div>
        <div class="input-row">
            <div class="input-group">
                <label>Unplanned Downtime (Hrs/Mo)</label>
                <div class="input-wrapper"><span>H</span><input type="number" id="downHrs" value="4" oninput="calc()"></div>
            </div>
            <div class="input-group">
                <label>Cost per Hour</label>
                <div class="input-wrapper"><span>$</span><input type="number" id="hrCost" value="250" oninput="calc()"></div>
            </div>
        </div>

        <div class="section-title">2. Material Efficiency (The Joker)</div>
        <div class="input-group" style="margin-bottom: 15px;">
            <label>Annual Material Spend (Total Budget)</label>
            <div class="input-wrapper"><span>$</span><input type="number" id="matSpend" value="4000000" oninput="calc()"></div>
        </div>
        <div class="input-row">
            <div class="input-group">
                <label>Waste Reduction %</label>
                <div class="input-wrapper"><span>%</span><input type="number" id="wastePct" value="1.5" step="0.1" oninput="calc()"></div>
            </div>
            <div class="input-group">
                <label>Re-print Reduction (Material Only)</label>
                <div class="input-wrapper"><span>%</span><input type="number" id="reprintPct" value="0.5" step="0.1" oninput="calc()"></div>
            </div>
        </div>

        <div class="section-title">3. Investment (New System)</div>
        <div class="input-row">
            <div class="input-group">
                <label>Total System Price</label>
                <div class="input-wrapper"><span>$</span><input type="number" id="sysPrice" value="120000" oninput="calc()"></div>
            </div>
            <div class="input-group">
                <label>Lifespan (Years)</label>
                <div class="input-wrapper"><span>Y</span><input type="number" id="years" value="5" oninput="calc()"></div>
            </div>
        </div>
    </div>

    <div class="visuals-panel">
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-label">Total Annual Waste</div>
                <div class="kpi-value red" id="valWaste">$0</div>
                <div style="font-size:11px; color:#94a3b8">Your cost to stay put</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">System Annual Cost</div>
                <div class="kpi-value blue" id="valSys">$0</div>
                <div style="font-size:11px; color:#94a3b8">Amortized over lifespan</div>
            </div>
        </div>

        <div class="chart-box">
            <div class="bar-group">
                <div class="bar-label"><span>Cost of Inaction (Waste)</span> <span id="lblWaste">$0</span></div>
                <div class="bar-track"><div class="bar-fill bg-red" id="barWaste"></div></div>
            </div>
            <div class="bar-group">
                <div class="bar-label"><span>Cost of Upgrade</span> <span id="lblSys">$0</span></div>
                <div class="bar-track"><div class="bar-fill bg-blue" id="barSys"></div></div>
            </div>
            <div style="text-align:center; margin-top:15px; font-weight:700; color:var(--danger)">
                ANNUAL LOSS: <span id="valLoss">$0</span>
            </div>
        </div>

        <div class="roi-section">
            <div class="roi-header">
                <span class="roi-title">âš¡ INVESTMENT RECOVERY</span>
                <span style="font-size:12px; color:var(--text-light)">Based on waste savings</span>
            </div>
            <div class="roi-metrics">
                <div class="roi-metric">
                    <div>PAYBACK PERIOD</div>
                    <div id="valPayback">0 Months</div>
                </div>
                <div class="roi-metric">
                    <div>5-YEAR NET SAVINGS</div>
                    <div id="val5Year" style="color:var(--success)">$0</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const fmt = (n) => '$' + n.toLocaleString('en-US', {maximumFractionDigits:0});

    function calc() {
        // Inputs
        const calls = +document.getElementById('calls').value;
        const callCost = +document.getElementById('callCost').value;
        const downHrs = +document.getElementById('downHrs').value;
        const hrCost = +document.getElementById('hrCost').value;
        const matSpend = +document.getElementById('matSpend').value;
        const wastePct = +document.getElementById('wastePct').value;
        const reprintPct = +document.getElementById('reprintPct').value;
        const sysPrice = +document.getElementById('sysPrice').value;
        const years = +document.getElementById('years').value;

        // Calculations
        const annualService = calls * callCost;
        const annualDowntime = downHrs * hrCost * 12;
        
        // Material Waste Savings
        const annualMatWaste = matSpend * (wastePct / 100);
        // Reprint Savings (Material only for simplicity, but huge impact)
        const annualReprintWaste = matSpend * (reprintPct / 100);
        
        const totalAnnualWaste = annualService + annualDowntime + annualMatWaste + annualReprintWaste;
        const annualSysCost = sysPrice / years;
        const netAnnualLoss = totalAnnualWaste - annualSysCost;

        // ROI Calculations
        // Payback in Months = (Total System Price / Total Annual Savings) * 12
        let paybackMonths = (sysPrice / totalAnnualWaste) * 12;
        if(paybackMonths < 0) paybackMonths = 999;
        
        // 5 Year Net Savings = (Total Annual Waste * 5) - Total System Price
        const fiveYearSavings = (totalAnnualWaste * 5) - sysPrice;

        // Render Top KPIs
        document.getElementById('valWaste').innerText = fmt(totalAnnualWaste);
        document.getElementById('valSys').innerText = fmt(annualSysCost);
        
        // Render Bars
        document.getElementById('lblWaste').innerText = fmt(totalAnnualWaste);
        document.getElementById('lblSys').innerText = fmt(annualSysCost);
        document.getElementById('valLoss').innerText = fmt(netAnnualLoss);
        
        const max = Math.max(totalAnnualWaste, annualSysCost) * 1.1;
        document.getElementById('barWaste').style.width = (totalAnnualWaste/max*100) + '%';
        document.getElementById('barSys').style.width = (annualSysCost/max*100) + '%';

        // Render ROI
        document.getElementById('valPayback').innerText = paybackMonths.toFixed(1) + " Months";
        document.getElementById('val5Year').innerText = fmt(fiveYearSavings);
    }
    calc();
</script>

</body>
</html>
