<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AVT Upgrade Value Analyzer</title>
    <style>
        :root { --primary: #0f172a; --accent: #3b82f6; --danger: #ef4444; --success: #10b981; --bg: #f8fafc; --card-bg: #ffffff; --text-main: #334155; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: var(--text-main); margin: 0; padding: 20px; display: flex; justify-content: center; }
        .dashboard { display: grid; grid-template-columns: 1fr 1.1fr; gap: 30px; max-width: 1100px; width: 100%; background: var(--card-bg); border-radius: 16px; box-shadow: 0 10px 40px -5px rgba(0,0,0,0.1); overflow: hidden; }
        .inputs-panel { padding: 30px; border-right: 1px solid #e2e8f0; background: #fff; }
        h2 { margin: 0 0 5px 0; color: var(--primary); }
        .subtitle { color: #64748b; font-size: 13px; margin-bottom: 25px; display: block; }
        .section-title { font-size: 11px; text-transform: uppercase; font-weight: 700; color: var(--accent); margin: 25px 0 10px 0; border-bottom: 1px solid #f1f5f9; padding-bottom: 5px; }
        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
        label { display: block; font-size: 12px; font-weight: 600; margin-bottom: 5px; }
        input { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; box-sizing: border-box; font-weight: 600; transition: 0.2s; }
        input:focus { border-color: var(--accent); outline: none; background: #f0f9ff; }
        
        /* Presets */
        .presets { display: flex; gap: 8px; margin-bottom: 5px; }
        .preset-btn {
            flex: 1;
            padding: 8px 4px;
            font-size: 11px;
            border: 1px solid #cbd5e1;
            background: #fff;
            border-radius: 4px;
            cursor: pointer;
            color: var(--text-main);
            transition: 0.2s;
            text-align: center;
            line-height: 1.3;
        }
        .preset-btn strong { display: block; font-size: 12px; margin-bottom: 2px; }
        .preset-btn:hover { background: #f1f5f9; border-color: var(--accent); }
        .preset-btn.active { background: var(--accent); color: white; border-color: var(--accent); }

        /* The Assumptions Note */
        .assumptions { font-size: 10px; color: #94a3b8; text-align: center; margin-bottom: 15px; font-style: italic; }

        .logic-note { font-size: 11px; background: #f0f9ff; color: #0369a1; padding: 8px; border-radius: 4px; border-left: 2px solid var(--accent); margin-top: 10px; }
        
        .visuals-panel { padding: 30px; background: #f8fafc; display: flex; flex-direction: column; gap: 20px; }
        .kpi-card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .kpi-label { font-size: 11px; color: #64748b; font-weight: 600; text-transform: uppercase; }
        .kpi-value { font-size: 28px; font-weight: 800; margin-top: 5px; }
        .red { color: var(--danger); } .green { color: var(--success); } .blue { color: var(--accent); }
        
        .chart-box { background: white; padding: 20px; border-radius: 12px; }
        .bar-group { margin-bottom: 15px; }
        .bar-label { display: flex; justify-content: space-between; font-size: 13px; font-weight: 600; margin-bottom: 5px; }
        .bar-track { height: 12px; background: #e2e8f0; border-radius: 6px; overflow: hidden; }
        .bar-fill { height: 100%; width: 0%; transition: width 1s; }
        .bg-red { background: var(--danger); } .bg-blue { background: var(--accent); }

        .trade-in-badge { background: #dcfce7; color: #166534; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: bold; margin-left: 5px; text-transform: uppercase; }
    </style>
</head>
<body>

<div class="dashboard">
    <div class="inputs-panel">
        <h2>Upgrade Value Analyzer</h2>
        <span class="subtitle">Calculate the "Cost of Inaction" based on efficiency gaps.</span>

        <div class="section-title">1. Current System "Bleed"</div>
        <div class="input-row">
            <div><label>Service Calls / Year</label><input type="number" id="calls" value="12" oninput="calc()"></div>
            <div><label>Avg Cost per Call ($)</label><input type="number" id="callCost" value="800" oninput="calc()"></div>
        </div>
        <div class="input-row">
            <div><label>Downtime (Hrs/Mo)</label><input type="number" id="downHrs" value="4" oninput="calc()"></div>
            <div><label>Cost per Hour ($)</label><input type="number" id="hrCost" value="250" oninput="calc()"></div>
        </div>

        <div class="section-title">2. Efficiency Gap (The Money Maker)</div>
        
        <label>Select Industry Profile:</label>
        <div class="presets">
            <button class="preset-btn" onclick="setSpend(2000000, this)"><strong>Basic</strong>$2M/yr</button>
            <button class="preset-btn active" onclick="setSpend(4000000, this)"><strong>Standard</strong>$4M/yr</button>
            <button class="preset-btn" onclick="setSpend(8000000, this)"><strong>Premium</strong>$8M/yr</button>
            <button class="preset-btn" onclick="setSpend(12000000, this)"><strong>Pharma</strong>$12M/yr</button>
        </div>
        <div class="assumptions">* Est. based on: 2 shifts, 200m/min, 55% OEE</div>

        <div style="margin-bottom:15px">
            <label>Annual Material Spend ($)</label>
            <input type="number" id="matSpend" value="4000000" oninput="resetPresets()">
        </div>

        <div class="input-row">
            <div><label>Waste Improvement (%)</label><input type="number" id="wastePct" value="1.5" step="0.1" oninput="calc()"></div>
            <div><label>Re-print Reduction (%)</label><input type="number" id="reprintPct" value="0.5" step="0.1" oninput="calc()"></div>
        </div>
        <div class="logic-note">
            <strong>Logic:</strong> Re-print cost = Material + 50% Ops Overhead.
        </div>

        <div class="section-title">3. Upgrade Deal</div>
        <div class="input-row">
            <div><label>New System Price ($)</label><input type="number" id="sysPrice" value="120000" oninput="calc()"></div>
            <div><label>Trade-In Credit ($)</label><input type="number" id="tradeIn" value="15000" oninput="calc()"></div>
        </div>
        <div><label>Lifespan (Years)</label><input type="number" id="years" value="5" oninput="calc()"></div>
    </div>

    <div class="visuals-panel">
        <div class="kpi-card" style="border-left: 4px solid var(--danger)">
            <div class="kpi-label">Old System Annual Waste</div>
            <div class="kpi-value red" id="valOld">$0</div>
            <div style="font-size:12px; color:#64748b; margin-top:5px;">Maintenance + Lost Material Efficiency</div>
        </div>

        <div class="kpi-card" style="border-left: 4px solid var(--accent)">
            <div class="kpi-label">New System Annual Cost <span class="trade-in-badge" id="tradeInBadge">Trade-In</span></div>
            <div class="kpi-value blue" id="valNew">$0</div>
            <div style="font-size:12px; color:#64748b; margin-top:5px;">After Trade-In, Amortized over 5 Years</div>
        </div>

        <div class="chart-box">
            <div class="bar-group">
                <div class="bar-label"><span>Staying with Old (Bleeding)</span><span id="lblOld">$0</span></div>
                <div class="bar-track"><div class="bar-fill bg-red" id="barOld"></div></div>
            </div>
            <div class="bar-group">
                <div class="bar-label"><span>Upgrading (Investment)</span><span id="lblNew">$0</span></div>
                <div class="bar-track"><div class="bar-fill bg-blue" id="barNew"></div></div>
            </div>
            
            <div style="margin-top:25px; padding-top:20px; border-top:1px dashed #e2e8f0; text-align:center;">
                <div class="kpi-label" style="color:var(--success)">NET ANNUAL SAVINGS</div>
                <div class="kpi-value green" id="valBenefit">$0</div>
                <div style="font-size:13px; font-weight:600; color:#166534; margin-top:5px;" id="txtPayback">Payback in 0 Months</div>
            </div>
        </div>
    </div>
</div>

<script>
    const fmt = (n) => '$' + n.toLocaleString('en-US', {maximumFractionDigits:0});

    function setSpend(amount, btn) {
        document.getElementById('matSpend').value = amount;
        document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        calc();
    }

    function resetPresets() {
        document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
        calc();
    }

    function calc() {
        const calls = +document.getElementById('calls').value;
        const callCost = +document.getElementById('callCost').value;
        const downHrs = +document.getElementById('downHrs').value;
        const hrCost = +document.getElementById('hrCost').value;
        const matSpend = +document.getElementById('matSpend').value;
        const wastePct = +document.getElementById('wastePct').value;
        const reprintPct = +document.getElementById('reprintPct').value;
        
        const sysPrice = +document.getElementById('sysPrice').value;
        const tradeIn = +document.getElementById('tradeIn').value;
        const years = +document.getElementById('years').value;

        // Old System Costs (The Delta)
        const annualService = calls * callCost;
        const annualDowntime = downHrs * hrCost * 12;
        const annualMatWaste = matSpend * (wastePct / 100);
        const annualReprintWaste = (matSpend * (reprintPct / 100)) * 1.5; 
        
        const totalOldCost = annualService + annualDowntime + annualMatWaste + annualReprintWaste;

        // New System Costs
        const netInvestment = Math.max(0, sysPrice - tradeIn);
        const annualNewCost = netInvestment / years;

        // ROI
        const annualBenefit = totalOldCost - annualNewCost;
        let paybackMonths = (netInvestment / totalOldCost) * 12;

        // Render
        document.getElementById('valOld').innerText = fmt(totalOldCost);
        document.getElementById('valNew').innerText = fmt(annualNewCost);
        document.getElementById('lblOld').innerText = fmt(totalOldCost);
        document.getElementById('lblNew').innerText = fmt(annualNewCost);
        
        document.getElementById('valBenefit').innerText = fmt(annualBenefit);
        document.getElementById('txtPayback').innerText = `ROI: Payback in ${paybackMonths.toFixed(1)} Months`;
        
        document.getElementById('tradeInBadge').style.opacity = tradeIn > 0 ? '1' : '0';

        const max = Math.max(totalOldCost, annualNewCost) * 1.1;
        document.getElementById('barOld').style.width = (totalOldCost/max*100) + '%';
        document.getElementById('barNew').style.width = (annualNewCost/max*100) + '%';
    }
    
    calc();
</script>

</body>
</html>
